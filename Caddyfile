{
	# Опционально: email для ACME
	email you@example.com
	# auto_https on
}

# DEV configuration (no external ACME): plain HTTP on :80
localhost:80 {
	encode gzip

	# Health-check for Caddy itself
	respond /health 200

	# API (FastAPI backend)
	@api path /admin/api* /admin/docs* /admin/redoc* /admin/openapi.json
	reverse_proxy @api admin-module:8000

	# React SPA for all other /admin paths
	@admin path /admin* 
	reverse_proxy @admin admin-frontend:4173
}

# PROD example (uncomment and adjust domain + email; requires public DNS pointing here)
# admin.example.com {
#   encode gzip
#   route /admin* {
#     reverse_proxy admin-module:8000
#   }
#   route /admin/docs* {
#     reverse_proxy admin-module:8000
#   }
#   route /admin/redoc* {
#     reverse_proxy admin-module:8000
#   }
#   route /admin/openapi.json {
#     reverse_proxy admin-module:8000
#   }
#   @all {
#     path *
#   }
#   reverse_proxy @all admin-module:8000
#   respond /health 200
# }
